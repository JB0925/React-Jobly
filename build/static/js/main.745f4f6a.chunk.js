(this.webpackJsonpjobly=this.webpackJsonpjobly||[]).push([[0],{29:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(30),s=n.n(c),i=(n(40),n(6)),o=(n(41),n(5)),u=a.a.createContext(),l=n(0),p=function(){var e=Object(r.useContext)(u),t=e.isLoggedIn,n=e.toggleLoggedIn,a=e.username;return t?Object(l.jsxs)("nav",{children:[Object(l.jsx)(o.b,{to:"/",id:"homeLink",children:"Jobly"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/companies",activeClassName:"activeLink",children:"Companies"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/jobs",activeClassName:"activeLink",children:"Jobs"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/profile",activeClassName:"activeLink",children:"Profile"})}),Object(l.jsx)("li",{children:Object(l.jsxs)(o.c,{to:"/",onClick:function(){return n(t)},children:["Log Out ",a]})})]})]}):Object(l.jsxs)("nav",{children:[Object(l.jsx)(o.b,{to:"/",id:"homeLink",children:"Jobly"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/login",activeClassName:"activeLink",children:"Login"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{to:"/signup",activeClassName:"activeLink",children:"Sign Up"})})]})]})},j=n(3),b=n(2),d=n.n(b),h=n(4),f=(n(52),function(e){var t=e.to,n=void 0===t?null:t,a=e.text,c=void 0===a?"Submit":a,s=e.backgroundColor,i=void 0===s?"dodgerblue":s,p=e.id,j=Object(r.useContext)(u),b=j.username,f=j.applyForJob,m={backgroundColor:i,border:"1px solid ".concat(i)};return null==n?Object(l.jsx)("button",{className:"formButton",type:"submit",onClick:Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,p);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:c}):Object(l.jsx)("button",{className:"button",style:m,children:Object(l.jsx)(o.b,{to:n,children:c})})}),m=(n(53),function(){var e=Object(r.useContext)(u).isLoggedIn;return Object(l.jsxs)("div",{className:"Home",children:[Object(l.jsx)("h1",{children:"Jobly"}),Object(l.jsx)("p",{children:"All the jobs in one convenient place."}),function(){var t=JSON.parse(window.localStorage.getItem("username"))||"";return e?Object(l.jsxs)("h2",{children:["Welcome Back, ",t,"!"]}):Object(l.jsxs)("div",{className:"Home-buttons",children:[Object(l.jsx)(f,{to:"/login",text:"Login",backgroundColor:"dodgerblue"}),Object(l.jsx)(f,{to:"/signup",text:"Sign Up",backgroundColor:"dodgerblue"})]})}()]})}),x=n(10),O=n(14),g=n(20),v=n(33),k=n(34),w=n(35),y=n.n(w),S="https://joblyjesse.herokuapp.com",C=function(){function e(){Object(v.a)(this,e)}return Object(k.a)(e,null,[{key:"request",value:function(){var t=Object(h.a)(d.a.mark((function t(n){var r,a,c,s,i,o,u=arguments;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},a=u.length>2&&void 0!==u[2]?u[2]:"get",console.debug("API Call:",n,r,a),c="".concat(S,"/").concat(n),s={Authorization:"Bearer ".concat(e.token)},i="get"===a?r:{},t.prev=6,t.next=9,y()({url:c,method:a,data:r,params:i,headers:s});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),o=t.t0.response.data.error.message,Array.isArray(o)?o:[o];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getCompany",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("companies/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.company);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCompanies",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.request("companies",t);case 3:return n=e.sent,e.abrupt("return",n.companies);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllJobs",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.request("jobs",t);case 3:return n=e.sent,e.abrupt("return",n.jobs);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,this.request("auth/token",{username:n,password:r},"post");case 3:return a=e.sent,this.token=a.token,e.abrupt("return",a.token);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return n=e.sent,e.abrupt("return",n.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t),n,"patch");case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"applyForJobs",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&void 0!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.request("users/".concat(t,"/jobs/").concat(n),{},"post");case 4:return r=e.sent,e.abrupt("return",r.applied);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();C.token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InRlc3R1c2VyIiwiaXNBZG1pbiI6ZmFsc2UsImlhdCI6MTU5ODE1OTI1OX0.FtrMwBQwe6Ue-glIFgz_Nf8XxRT2YecFCiSpYL0fCXc";var N=C,I=[{loginFormState:{username:"",password:""},signupFormState:{username:"",password:"",firstName:"",lastName:"",email:""},searchFormState:{name:""}}],J="Username",L="Password",F="First Name",A="Last Name",U="Email",q="Confirm password to make changes:",E="",P={flexDirection:"row",width:"100%",border:"none",padding:"0",marginTop:"50px",marginBottom:"20px"},B=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,"/companies"!==t){e.next=5;break}return e.next=4,N.getAllCompanies();case 4:case 8:case 12:return e.abrupt("return",e.sent);case 5:if("/companies/:handle"!==t){e.next=9;break}return e.next=8,N.getCompany(n);case 9:if("/jobs"!==t){e.next=13;break}return e.next=12,N.getAllJobs();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=(n(29),function(e){var t=e.initialState,n=e.labels,a=e.formStyle,c=void 0===a?{}:a,s=e.placeholder,o=void 0===s?"":s,u=e.setData,p=void 0===u?null:u,j=function(e){var t=Object(r.useState)(e),n=Object(i.a)(t,2),a=n[0],c=n[1];return[a,function(e){var t=e.target,n=t.name,r=t.value;c((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(O.a)({},n,r))}))},function(t,n){t.preventDefault();var r=t.target.action;if(r.includes("signup")||r.includes("login")||r.includes("profile"))c((function(t){return e})),n(a);else{var s=t.target.action.includes("companies")?a:{title:a.name};c((function(t){return e})),n(s)}}]}(t),b=Object(i.a)(j,3),m=b[0],x=b[1],v=b[2],k=Object.keys(t),w=Object.values(n),y=k.map((function(e,t){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("label",{htmlFor:w[t],children:w[t]}),Object(l.jsx)("input",{id:e,name:e,value:m[e],onChange:x,type:"password"===e?"password":"text",placeholder:o,required:!0})]})}));return Object(l.jsxs)("form",{onSubmit:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t,p,m));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),style:c,children:[y,Object(l.jsx)(f,{})]})}),T=(n(73),function(e){var t=e.initialState,n=e.formLabels,a=e.title,c=e.path,s=Object(r.useContext)(u),o=s.toggleLoggedIn,p=s.toggleUsername,b=s.getUserInfo,f=(s.userInfo,function(e,t,n,r,a,c){var s=Object(j.g)(),i=function(){var a=Object(h.a)(d.a.mark((function a(i){var o,u;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===window.localStorage.getItem("token")||"/profile"===e){a.next=2;break}return a.abrupt("return",s.push("/companies"));case 2:if(u=i.username||c,"/signup"!==e){a.next=10;break}return a.next=6,N.register(i);case 6:o=a.sent,s.push("/login"),a.next=27;break;case 10:if("/login"!==e){a.next=22;break}return a.next=13,N.login(i);case 13:o=a.sent,t(),n(u),r(u),window.localStorage.setItem("token",JSON.stringify(o)),window.localStorage.setItem("username",JSON.stringify(u)),s.push("/"),a.next=27;break;case 22:return a.next=24,N.updateUser(u,i);case 24:o=a.sent,r(u),s.push("/companies");case 27:case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return[i]}(c,o,p,b,0,s.username)),m=Object(i.a)(f,1)[0];return Object(l.jsx)("div",{className:"UserInfo",children:Object(l.jsxs)("div",{className:"UserInfo-container",children:[Object(l.jsx)("h1",{children:a}),Object(l.jsx)(D,{initialState:t,labels:n,setData:m})]})})}),M=(n(74),n(75),["https://image.shutterstock.com/image-vector/finance-company-logo-vector-design-600w-1540007387.jpg","https://image.shutterstock.com/image-vector/red-trusted-seller-stamp-logo-600w-2014652267.jpg","https://image.shutterstock.com/image-vector/unique-modern-aerospace-model-logo-600w-2021852555.jpg","https://image.shutterstock.com/image-vector/designer-logo-designing-company-creative-600w-1931292683.jpg","https://image.shutterstock.com/image-vector/vector-logo-design-template-perfect-600w-1807741420.jpg","https://image.shutterstock.com/image-vector/stranger-man-wearing-hat-spy-600w-1780297649.jpg"]),X=function(e){var t=e.data,n=e.id,a=e.jobs,c=void 0!==a&&a,s=Object(r.useContext)(u).userJobs;return c?Object(l.jsxs)("div",{className:"Card",children:[Object(l.jsxs)("div",{className:"Card-jobcard",children:[Object(l.jsx)("h2",{children:t.title}),Object(l.jsx)("h3",{children:t.companyName})]}),Object(l.jsxs)("div",{className:"Card-jobcard",children:[Object(l.jsxs)("p",{children:["Salary: ",t.salary]}),Object(l.jsxs)("p",{children:["Equity: ",t.equity]})]}),Object(l.jsx)(f,{text:s.includes(n)?"Applied":"Apply",backgroundColor:"red",id:n})]}):Object(l.jsxs)(o.b,{to:"/companies/".concat(t.handle),className:"Card",children:[Object(l.jsxs)("div",{className:"Card-row",children:[Object(l.jsx)("h2",{children:t.name}),Object(l.jsx)("div",{className:"Card-image",children:Object(l.jsx)("img",{src:function(){var e=Math.floor(Math.random()*M.length);return M[e]}(),alt:t.name})})]}),Object(l.jsx)("div",{className:"Card-row",children:Object(l.jsx)("p",{children:t.description})})]})},R=n(79),z=function(e){var t=e.formStyle,n=void 0===t?null:t,a=e.placeholder,c=void 0===a?"":a,s=e.jobs,o=void 0!==s&&s,p=e.path,b=void 0===p?"":p,f=Object(r.useContext)(u).isLoggedIn,m=I[0].searchFormState,O=function(e,t,n,a,c,s){var o=Object(j.h)().handle,u=Object(r.useState)([]),p=Object(i.a)(u,2),b=p[0],f=p[1],m=Object(r.useState)({title:"",description:""}),O=Object(i.a)(m,2),g=O[0],v=O[1];Object(r.useEffect)((function(){function t(){return(t=Object(h.a)(d.a.mark((function t(){var n,r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=6;break}return t.next=3,B(e);case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,B(e,o);case 8:t.t0=t.sent;case 9:n=t.t0,f(o?function(e){return Object(x.a)(n.jobs)}:function(e){return Object(x.a)(n)}),r=n.name,a=n.description,v((function(e){return{name:r,description:a}}));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,o]);var k=function(){var e=Object(h.a)(d.a.mark((function e(n){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,N.getAllCompanies(n);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,N.getAllJobs(n);case 8:e.t0=e.sent;case 9:r=e.t0,f((function(e){return Object(x.a)(r)})),a=r.name,c=r.description,v((function(e){return{name:a,description:c}}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return[b,g,function(){var e=g.name,t=g.description;return Object(l.jsxs)("div",{className:"CompaniesAndJobs-container",children:[Object(l.jsx)("h1",{children:e}),Object(l.jsx)("p",{children:t})]})},function(){return Object(l.jsx)("div",{className:"CompaniesAndJobs-container",children:Object(l.jsx)(D,{id:"searchForm",initialState:n,labels:a,formStyle:c,placeholder:s,setData:k})})}]}(b,o,m,E,n,c),g=Object(i.a)(O,4),v=g[0],k=g[1],w=g[2],y=g[3],S=v.map((function(e){return Object(l.jsx)(X,{data:e,jobs:o,id:e.id},Object(R.a)())}));return f?Object(l.jsxs)("div",{className:"CompaniesAndJobs",children:[k&&w(),n&&y(),S]}):Object(l.jsx)(j.a,{to:"/login"})},V=function(){var e=I[0],t=e.loginFormState,n=e.signupFormState,a=J,c=L,s=F,i=A,o=U,p=q,b=Object(r.useContext)(u).userInfo;return Object(l.jsxs)(j.d,{children:[Object(l.jsx)(j.b,{exact:!0,path:"/",children:Object(l.jsx)(m,{})}),Object(l.jsx)(j.b,{exact:!0,path:"/signup",children:Object(l.jsx)(T,{initialState:n,formLabels:{username:a,password:c,firstName:s,lastName:i,email:o},title:"Sign Up",path:"/signup"})}),Object(l.jsx)(j.b,{exact:!0,path:"/login",children:Object(l.jsx)(T,{initialState:t,formLabels:{username:a,password:c},title:"Login",path:"/login"})}),Object(l.jsx)(j.b,{exact:!0,path:"/companies",children:Object(l.jsx)(z,{formStyle:P,placeholder:"Enter a Search",path:"/companies"})}),Object(l.jsx)(j.b,{exact:!0,path:"/jobs",children:Object(l.jsx)(z,{formStyle:P,placeholder:"Enter a Search",path:"/jobs",jobs:!0})}),Object(l.jsx)(j.b,{path:"/companies/:handle",children:Object(l.jsx)(z,{path:"/companies/:handle",jobs:!0})}),Object(l.jsx)(j.b,{exact:!0,path:"/profile",children:Object(l.jsx)(T,{initialState:b,formLabels:{firstName:s,lastName:i,email:o,confirm:p},title:"Profile",path:"/profile"})}),Object(l.jsx)(j.a,{to:"/"})]})};n(76);var Z=function(){var e=function(){var e=Object(j.g)(),t=!!window.localStorage.getItem("token"),n=JSON.parse(window.localStorage.getItem("username"))||"";t&&(N.token=JSON.parse(window.localStorage.getItem("token")));var a=Object(r.useState)(t),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(n),l=Object(i.a)(u,2),p=l[0],b=l[1],f=Object(r.useState)([]),m=Object(i.a)(f,2),O=m[0],g=m[1],v=Object(r.useState)({firstName:"",lastName:"",email:""}),k=Object(i.a)(v,2),w=k[0],y=k[1],S=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getUser(t);case 2:n=e.sent,r=n.firstName,a=n.lastName,c=n.email,s=n.applications,g((function(e){return Object(x.a)(s)})),y((function(e){return{firstName:r,lastName:a,email:c}}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.applyForJobs(t,n);case 2:g((function(e){return[].concat(Object(x.a)(e),[n])}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){function e(){return e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,S(t);case 3:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(t){e.apply(this,arguments)}(p)}),[p]),[s,p,O,w,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o((function(e){return!e})),(t=!t)||(window.localStorage.removeItem("token"),window.localStorage.removeItem("username"),e.push("/login"))},function(e){b((function(t){return e}))},S,C]}(),t=Object(i.a)(e,8),n={isLoggedIn:t[0],username:t[1],userJobs:t[2],userInfo:t[3],toggleLoggedIn:t[4],toggleUsername:t[5],getUserInfo:t[6],applyForJob:t[7]};return Object(l.jsx)(u.Provider,{value:n,children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(p,{}),Object(l.jsx)(V,{})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,80)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(l.jsx)(o.a,{children:Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(Z,{})})}),document.getElementById("root")),G()}},[[77,1,2]]]);
//# sourceMappingURL=main.745f4f6a.chunk.js.map